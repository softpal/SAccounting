@model StratusAccounting.Models.Payment

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
    <h3>Payment Details</h3>
</div>

<div class="modal-body">
    <div class="scroller" data-always-visible="1" data-rail-visible1="1">
        <div class="row-fluid">
            <div class="span6 ">
                               
                <div class="control-group">
                    <label for="firstName" class="control-label">Preferred Payment Method</label>
                    <div class="controls">
                        @Html.DropDownListFor(model => model.PaymentTypesId, (SelectList)ViewBag.PaymentType, "--Select--")@*, new { @class = "m-wrap span12 border-form-radius" }*@
                        @Html.ValidationMessageFor(model => model.PaymentTypesId)
                        @Html.HiddenFor(model=> model.UserVendorId)
                    </div>
                </div>
                <div class="control-group">
                    <label for="firstName" class="control-label">Credit Card Token ID</label>
                    <div class="controls">
                        @Html.EditorFor(model => model.CreditCardToken)
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<div class="modal-footer">
    <input type="button" class="btn blue" onclick="SavePaymentDetails();" value="Save" />
    <a class="btn" onclick="CloseAddPopup();">Cancel</a>
</div>

<script>
    function SavePaymentDetails() {
        var strDetails = new Array();
        strDetails.push($("#UserVendorId").val());
        strDetails.push($("#PaymentTypesId").val());
        strDetails.push($("#CreditCardToken").val());
        $.ajax({
            type: "POST",
            contentType: "application/json",
            url: "/Vendors/SavePaymentDetails",
            data: JSON.stringify({ "paymentDetails": strDetails }),
            success: function (data) {
                if (data) {
                    CloseAddPopup();
                    @*var url = '@Url.Action("VendorDetails", "Vendors", new { id = "__id__" })';
                    window.location.href = url.replace('__id__', strDetails[0]);*@
                }
            },
            error: function (data) {
                //debugger;
            }
        });
    }

    function CloseAddPopup() {
        $(".close").click();
    }
</script>
